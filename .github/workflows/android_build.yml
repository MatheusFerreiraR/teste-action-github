name: Android Build

on: pull_request

jobs:
  build:
    run-in-container:
      runs-on: ubuntu-latest
      container: node:14-alpine
      steps:
        - uses: action/checkout@v1

        - name: Use Node.js 16
          uses: actions/setup-node@v2
          with:
            node-version: 16

        - name: Set Up JDK
          uses: actions/setup-java@v1
          with:
            java-version: 11

        - name: Build with Gradle
          run: ./gradlew build

        - name: list files
          run: ls -lrt app/build/outputs/apk/debug

        - name: upload artifact to Firebase App Distribution
          uses: wzieba/Firebase-Distribution-Github-Action@v1.2.1
          with:
            appId: 1
            token: ${{secrets.TESTE_ACTION_GITHUB}}
            groups: testers
            file: app/build/outputs/apk/debug/app-debug.apk